<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<div th:replace="~{usr/include/head :: head}"></div>


    <!-- Checkout Page Start -->
    <div class="container-fluid py-5">
        <div class="container py-5 mt-5">
            <h1 class="text-center mb-4 mt-5">개인정보 수정</h1>
            <form action="/TableOrder/accountRegisterUpdt" method="post" id="form" class="needs-validation" novalidate>
                <div class="row g-5">
                    <div class="col"></div>

                    <div class="col-md-12 col-lg-6 col-xl-5">
                        <div class="row my-3">
                            <div class="col-md-12 col-lg-6">
                                <div class="form-item w-100">
                                    <input type="text" class="form-control" name="lastNm" placeholder="성" th:value="${user.lastNm}" required>
                                    <div class="invalid-feedback">
                                        성을 입력하세요.
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 col-lg-6">
                                <div class="form-item w-100">
                                    <input type="text" class="form-control" name="firstNm" placeholder="이름" th:value="${user.firstNm}" required>
                                    <div class="invalid-feedback">
                                        이름을 입력하세요.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <select class="form-select" name="gender">
                            <option disabled hidden selected value="">성별</option>
                            <option value="1" th:selected="${user.gender == 1}">남자</option>
                            <option value="2" th:selected="${user.gender == 2}">여자</option>
                            <option value="3" th:selected="${user.gender == 3}">공개안함</option>
                        </select>

                        <div class="row my-3">
                            <div class="col-md-12 col-lg-4">
                                <select name="birthYear" id="birthYearSelect" class="form-select" required>
                                    <option disabled hidden selected value="">연</option>
                                </select>
                            </div>
                            <div class="col-md-12 col-lg-4">
                                <select name="birthMonth" id="birthMonthSelect" class="form-select">
                                    <option disabled hidden selected value="">월</option>
                                </select>
                            </div>
                            <div class="col-md-12 col-lg-4">
                                <select name="birthDay" id="birthDaySelect" class="form-select">
                                    <option disabled hidden selected value="">일</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-item my-3">
                            <input type="text" class="form-control" placeholder="휴대폰 번호" th:value="${user.phone}" required>
                            <div class="invalid-feedback">
                                휴대폰 번호를 입력하세요.
                            </div>
                        </div>
                        <div class="d-grid my-3">
                            <button type="button" id="btnSave"
                                class="btn btn-primary border-0 border-secondary py-3 px-4 rounded-pill text-white">
                                저장
                            </button>
                        </div>
                    </div>

                    <div class="col"></div>
                </div>
            </form>
        </div>
    </div>
    <!-- Checkout Page End -->
    
   	<script th:inline="javascript">
	    // 타임리프 변수를 자바스크립트로 전달
	    var selectedYear = /*[[${user.birthYear}]]*/ 0;
	    var selectedMonth = /*[[${user.birthMonth}]]*/ 0;
	    var selectedDay = /*[[${user.birthDay}]]*/ 0;
	    
	</script>
	
    <script>
    
    
    
 	// 연도 Select
    const birthYearSelect = document.getElementById("birthYearSelect");
    const currentYear = new Date().getFullYear();
    
    for (let year = currentYear; year >= currentYear-100; year--) {
        let option = document.createElement("option");
        option.value = year;
        option.textContent = year;
        
    	 // 기본 선택값 설정
        if (year == selectedYear) {
            option.selected = true;
        }
     
        birthYearSelect.appendChild(option);
    }
    
    // 월 Select
    const birthMonthSelect = document.getElementById("birthMonthSelect");

    for (let month = 1; month <= 12; month++) {
        let option = document.createElement("option");
        option.value = month;
        option.textContent = month;
        
  	 	 // 기본 선택값 설정
        if (month == selectedMonth) {
            option.selected = true;
        }
   	 
        birthMonthSelect.appendChild(option);
    }
    
 	// 일 Select
    const birthDaySelect = document.getElementById("birthDaySelect");

    for (let day = 1; day <= 31; day++) {
		
        let option = document.createElement("option");
        option.value = day;
        option.textContent = day;
        
   		 // 기본 선택값 설정
        if (day == selectedDay) {
            option.selected = true;
        }
   	 
        birthDaySelect.appendChild(option);
    }
    
	document.getElementById("btnSave").onclick = function() {
		document.getElementById("form").submit();
	}
    
    </script>

<div th:replace="~{usr/include/footer :: footer}"></div>