<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<div th:replace="~{usr/include/head :: head}"></div>

<form action="" method="post" class="needs-validation" novalidate>
	<input type="hidden" name="memberId" th:value="${member.memberId}">
	<div class="container-fluid py-5">
		<div class="container py-5 mt-5">
			<h1 class="text-center mb-4 mt-5">개인정보 수정</h1>
				<div class="row g-5">
					<div class="col"></div>

					<div class="col-md-12 col-lg-6 col-xl-5">
						<div class="form-item my-3">
							<input type="text" class="form-control" placeholder="이름" name="name" th:value="${member.name}" required>
							<div class="invalid-feedback">이름을 입력하세요.</div>
						</div>
						<div class="row my-3">
							<div class="col-md-12 col-lg-6">
								<select class="form-select" name="gender" required>
		                            <option disabled hidden selected value="">성별</option>
									<option th:each="code : ${genderCode}" 
											th:value="${code.codeId}"
											th:text="${code.name}"
											th:selected="${code.codeId == member.gender.toString()}"
											>
									</option>
		                        </select>
							</div>
							<div class="col-md-12 col-lg-6">
								<input id="datetimepicker" name="birthday" type="text" class="form-control" placeholder="생년월일" th:value="${member.birthday}" autocomplete='off' required>
								<div class="invalid-feedback">생년월일을 입력하세요.</div>
							</div>
						</div>

						<div class="row my-3">
							<div class="col-md-12 col-lg-4">
								<select class="form-select" name="mobileCarrier" required>
									<option disabled hidden selected value="">통신사</option>
									<option th:each="code : ${mobileCarrierCode}" 
											th:value="${code.codeId}"
											th:text="${code.name}"
											th:selected="${code.codeId == member.mobileCarrier.toString()}"
											>
									</option>
								</select>
							</div>
							<div class="col-md-12 col-lg-8">
								<input type="text" class="form-control" name="phone" placeholder="휴대폰 번호" th:value="${member.phone}" required>
                            <div class="invalid-feedback">
                                휴대폰 번호를 입력하세요.
                            </div>
							</div>
						</div>

						<div class="d-grid my-3">
							<button type="button" id="btnSubmit" class="btn btn-primary border-0 border-secondary py-3 px-4 rounded-pill text-white">
								<span>저장</span>
							</button>
						</div>
					</div>

					<div class="col"></div>
				</div>

		</div>
	</div>
</form>

	
<!-- temp -->
<script type="text/javascript">


	const form = document.querySelector('.needs-validation'); // 단일 폼 선택
	
// 	const inputEmail = form.querySelector("input[name='email']");
// 	const inputPwd = form.querySelector("input[name='password']");
// 	const inputPwdChk = form.querySelector("input[name='passwordChk']");
	
// 	const inputNickNm = form.querySelector("input[name='nickname']");
// 	const inputLastNm = form.querySelector("input[name='lastNm']");
// 	const inputFirstNm = form.querySelector("input[name='firstNm']");
// 	const selectGender = form.querySelector("select[name='gender']");
// 	const inputUserDob = form.querySelector("input[name='userDob']");
	
// 	const selectMobileCarrier = form.querySelector("select[name='mobileCarrier']");
// 	const inputPhone = form.querySelector("input[name='phone']");

// 	function validation() {
	    
// 	    let isValid = true;
	    
// 	    if (!inputEmail.value.trim() && (seq.value == "0" || seq.value == "")) {		// Email
// 	    	inputEmail.focus();
// 	        isValid = false;
// 	    } else if (!inputPwd.value.trim() && (seq.value == "0" || seq.value == "")) {	// Password
// 	    	inputPwd.focus();
// 	        isValid = false;
// 	    } else if (!inputPwdChk.value.trim() && (seq.value == "0" || seq.value == "")) {		// PaswordChk
// 	    	inputPwdChk.focus();
// 	        isValid = false;
// 	    } else if (!inputNickNm.value.trim()) {		// Nickname
// 	    	inputNickNm.focus();
// 	        isValid = false;
// 	    } else if (!inputLastNm.value.trim()) {		// LastNm
// 	    	inputLastNm.focus();
// 	        isValid = false;
// 	    } else if (!inputFirstNm.value.trim()) {	// FirstNm
// 	    	inputFirstNm.focus();
// 	        isValid = false;
// 	    } else if (!selectGender.value) {		// Gender
// 	    	selectGender.focus();
// 	        isValid = false;
// 	    } else if (!inputUserDob.value.trim()) {		// UserDob
// 	    	inputUserDob.focus();
// 	        isValid = false;
// 	    } else if (!selectMobileCarrier.value) {	// MobileCarrier
// 	    	selectMobileCarrier.focus();
// 	        isValid = false;
// 	    } else if (!inputPhone.value.trim()) { // Phone
// 	    	inputPhone.focus();
// 	        isValid = false;
// 	    }
	    
	    
// 	    if(!isValid){
// 	    	form.classList.add("was-validated");
// 	    }
	
// 	    return isValid;
// 	}

// 	document.addEventListener("DOMContentLoaded", function () {

// 		// 첫 글자가 공백이면 자동 제거
// 	    inputEmail.addEventListener("input", function () {
// 	        this.value = this.value.replace(/^\s+/, "");
// 	    });
// 	    inputPwd.addEventListener("input", function () {
// 	        this.value = this.value.replace(/^\s+/, "");
// 	    });
// 	    inputPwdChk.addEventListener("input", function () {
// 	        this.value = this.value.replace(/^\s+/, "");
// 	    });
// 	    inputNickNm.addEventListener("input", function () {
// 	        this.value = this.value.replace(/^\s+/, "");
// 	    });
// 	    inputLastNm.addEventListener("input", function () {
// 	        this.value = this.value.replace(/^\s+/, "");
// 	    });
// 	    inputFirstNm.addEventListener("input", function () {
// 	        this.value = this.value.replace(/^\s+/, "");
// 	    });
// 	    inputPhone.addEventListener("input", function () {
// 	        this.value = this.value.replace(/^\s+/, "");
// 	    });
// 	    inputUserDob.addEventListener("input", function () {
// 	        this.value = this.value.replace(/^\s+/, "");
// 	    });
// 	});
	
	
// 	let seq = document.querySelector("input[name=ifcgSeq]");
	
	document.getElementById("btnSubmit").onclick = function(){												// Update
// 		if(validation() == false) return false;
// 		if(pwdChk() == false) return false;
		form.action = "/tableOrder/sign/edit";
		form.submit();
	}
	
	// 생년월일
	jQuery('#datetimepicker').datetimepicker({
		timepicker:false,
		format:'Y-m-d'
	});

</script>

<div th:replace="~{usr/include/footer :: footer}"></div>